# bump_release

[![Powered by Mason](https://img.shields.io/endpoint?url=https%3A%2F%2Ftinyurl.com%2Fmason-badge)](https://github.com/felangel/mason)

Automated version bumping and release creation using git-cliff for semantic versioning.

_Generated by [mason][1] 🧱_

## Features

- 🚀 **Automated version bumping** using conventional commits
- 📋 **Changelog generation** with git-cliff
- 🔍 **Smart change detection** - only creates releases when needed
- 🏷️ **Git tag management** with interactive confirmation
- ✅ **Safety checks** for branch and uncommitted changes
- 🎯 **Semantic versioning** support (major.minor.patch)

## Prerequisites

- **git-cliff** - Install from [https://github.com/orhun/git-cliff](https://github.com/orhun/git-cliff)
  ```bash
  # Via Cargo
  cargo install git-cliff
  
  # Via Homebrew (macOS)
  brew install git-cliff
  
  # Via direct download
  # See: https://github.com/orhun/git-cliff/releases
  ```

## Usage

1. **Generate the script** in your project:
   ```bash
   mason make bump_release
   ```

2. **Make script executable**:
   ```bash
   chmod +x create-release.sh
   ```

3. **Run the script**:
   ```bash
   ./create-release.sh
   ```

## What it does

1. ✅ Checks that git-cliff is installed
2. ✅ Verifies you're on the main branch (configurable)
3. ✅ Ensures all changes are committed
4. 🔍 Analyzes commits since last release using conventional commits
5. 📊 Determines next version (patch/minor/major) automatically
6. 📋 Shows changes that will be included
7. ❓ Asks for confirmation to create tag
8. 🏷️ Creates local git tag
9. ❓ Asks for confirmation to push tag
10. 📤 Pushes tag to remote (triggers CI/CD)

## Configuration

The brick generates:
- `{{script_name}}.sh` - The release script

The script will automatically:
- 🔍 **Find git repository root** - Works from any subdirectory
- 📋 **Use cliff.toml if present** - Looks for configuration in repository root
- ⚙️ **Fallback to defaults** - Uses git-cliff defaults if no config found

### Variables

- `script_name` - Name for the script file (default: "create-release")
- `default_branch` - Branch to check (default: "main")  
- `farewell_message` - Custom goodbye message

## Repository Structure

The script can be placed anywhere in your repository:
```
your-repo/
├── cliff.toml          # Optional: git-cliff configuration
├── scripts/
│   └── create-release.sh  # ✅ Works from here
└── tools/
    └── create-release.sh  # ✅ Works from here too
```

The script will always operate from the git repository root, regardless of where it's located.

## Conventional Commits

The script uses conventional commits for automatic version bumping:

- `feat:` → Minor version bump (1.0.0 → 1.1.0)
- `fix:` → Patch version bump (1.0.0 → 1.0.1)
- `BREAKING CHANGE:` → Major version bump (1.0.0 → 2.0.0)

## Example Output

```bash
🚀 Bump Release Script
=====================
✅ On main branch
✅ All changes committed
📦 Current version: 1.0.0
🔍 Analyzing changes since last release...
🎯 Next version: 1.1.0
🏷️ New tag: v1.1.0

📋 Changes since last release:
  - feat: add new feature
  - fix: resolve bug in component

❓ Create tag v1.1.0? (y/N): y
🏷️ Creating local tag...
✅ Local tag v1.1.0 created
❓ Push tag v1.1.0 to remote? This will trigger CI/CD pipeline! (y/N): y
📤 Pushing tag to remote...
✅ Release v1.1.0 created and pushed successfully!
```

[1]: https://github.com/felangel/mason
[2]: https://docs.brickhub.dev
[3]: https://verygood.ventures/blog/code-generation-with-mason
[4]: https://youtu.be/G4PTjA6tpTU
[5]: https://youtu.be/qjA0JFiPMnQ
[6]: https://youtu.be/o8B1EfcUisw
[7]: https://youtu.be/LXhgiF5HiQg
