# bump_release

[![Powered by Mason](https://img.shields.io/endpoint?url=https%3A%2F%2Ftinyurl.com%2Fmason-badge)](https://github.com/felangel/mason)

Automated version bumping and release creation using git-cliff for semantic versioning.

_Generated by [mason][1] ğŸ§±_

## Features

- ğŸš€ **Automated version bumping** using conventional commits
- ğŸ“‹ **Changelog generation** with git-cliff
- ğŸ” **Smart change detection** - only creates releases when needed
- ğŸ·ï¸ **Git tag management** with interactive confirmation
- âœ… **Safety checks** for branch and uncommitted changes
- ğŸ¯ **Semantic versioning** support (major.minor.patch)

## Prerequisites

- **git-cliff** - Install from [https://github.com/orhun/git-cliff](https://github.com/orhun/git-cliff)
  ```bash
  # Via Cargo
  cargo install git-cliff
  
  # Via Homebrew (macOS)
  brew install git-cliff
  
  # Via direct download
  # See: https://github.com/orhun/git-cliff/releases
  ```

## Usage

1. **Generate the script** in your project:
   ```bash
   mason make bump_release
   ```

2. **Make script executable**:
   ```bash
   chmod +x create-release.sh
   ```

3. **Run the script**:
   ```bash
   ./create-release.sh
   ```

## What it does

1. âœ… Checks that git-cliff is installed
2. âœ… Verifies you're on the main branch (configurable)
3. âœ… Ensures all changes are committed
4. ğŸ” Analyzes commits since last release using conventional commits
5. ğŸ“Š Determines next version (patch/minor/major) automatically
6. ğŸ“‹ Shows changes that will be included
7. â“ Asks for confirmation to create tag
8. ğŸ·ï¸ Creates local git tag
9. â“ Asks for confirmation to push tag
10. ğŸ“¤ Pushes tag to remote (triggers CI/CD)

## Configuration

The brick generates:
- `{{script_name}}.sh` - The release script

The script will automatically:
- ğŸ” **Find git repository root** - Works from any subdirectory
- ğŸ“‹ **Use cliff.toml if present** - Looks for configuration in repository root
- âš™ï¸ **Fallback to defaults** - Uses git-cliff defaults if no config found

### Variables

- `script_name` - Name for the script file (default: "create-release")
- `default_branch` - Branch to check (default: "main")  
- `farewell_message` - Custom goodbye message

## Repository Structure

The script can be placed anywhere in your repository:
```
your-repo/
â”œâ”€â”€ cliff.toml          # Optional: git-cliff configuration
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ create-release.sh  # âœ… Works from here
â””â”€â”€ tools/
    â””â”€â”€ create-release.sh  # âœ… Works from here too
```

The script will always operate from the git repository root, regardless of where it's located.

## Conventional Commits

The script uses conventional commits for automatic version bumping:

- `feat:` â†’ Minor version bump (1.0.0 â†’ 1.1.0)
- `fix:` â†’ Patch version bump (1.0.0 â†’ 1.0.1)
- `BREAKING CHANGE:` â†’ Major version bump (1.0.0 â†’ 2.0.0)

## Example Output

```bash
ğŸš€ Bump Release Script
=====================
âœ… On main branch
âœ… All changes committed
ğŸ“¦ Current version: 1.0.0
ğŸ” Analyzing changes since last release...
ğŸ¯ Next version: 1.1.0
ğŸ·ï¸ New tag: v1.1.0

ğŸ“‹ Changes since last release:
  - feat: add new feature
  - fix: resolve bug in component

â“ Create tag v1.1.0? (y/N): y
ğŸ·ï¸ Creating local tag...
âœ… Local tag v1.1.0 created
â“ Push tag v1.1.0 to remote? This will trigger CI/CD pipeline! (y/N): y
ğŸ“¤ Pushing tag to remote...
âœ… Release v1.1.0 created and pushed successfully!
```

[1]: https://github.com/felangel/mason
[2]: https://docs.brickhub.dev
[3]: https://verygood.ventures/blog/code-generation-with-mason
[4]: https://youtu.be/G4PTjA6tpTU
[5]: https://youtu.be/qjA0JFiPMnQ
[6]: https://youtu.be/o8B1EfcUisw
[7]: https://youtu.be/LXhgiF5HiQg
